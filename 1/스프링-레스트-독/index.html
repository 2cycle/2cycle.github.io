<!DOCTYPE html>
<html lang="kr-ko">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="Soonhwan.Lee">
  <meta name="description" content="Project - make me better">
  <meta name="keywords" content="development, programmer, dev, backend">
  
  
  <link rel="next" href="https://2cycle.github.io/2019/init/" />
  <link rel="canonical" href="https://2cycle.github.io/1/%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%B5%E1%86%BC-%E1%84%85%E1%85%A6%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3-%E1%84%83%E1%85%A9%E1%86%A8/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
            | ecycle
       
  </title>
  <meta name="title" content=" | ecycle">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https://2cycle.github.io"
    },
    "articleSection" : "posts",
    "name" : "",
    "headline" : "",
    "description" : "## Spring Rest Docs ### 도입 ```text Spring REST Docs makes use of snippets produced by tests written with Spring MVC’s test framework, Spring WebFlux’s WebTestClient or REST Assured 3. This test-driven approach helps to guarantee the accuracy of your service’s documentation. If a snippet is incorrect the test that produces it will fail. ``` &gt; 테스트 지향적인 접근 방법은 서비스 Document의 정확성을 보장하는데 도움을 준다. Spring MVC test를 통한 정보를 통해서 문서 조각(snippet)을 모아셔 api document를 만드는 툴 Asciidoctor 를 사용하여 HTML을 생성.",
    "inLanguage" : "kr-ko",
    "author" : "Soonhwan.Lee",
    "creator" : "Soonhwan.Lee",
    "publisher": "Soonhwan.Lee",
    "accountablePerson" : "Soonhwan.Lee",
    "copyrightHolder" : "Soonhwan.Lee",
    "copyrightYear" : "0001",
    "datePublished": "0001-01-01 00:00:00 &#43;0000 UTC",
    "dateModified" : "0001-01-01 00:00:00 &#43;0000 UTC",
    "url" : "https://2cycle.github.io/1/%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%B5%E1%86%BC-%E1%84%85%E1%85%A6%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3-%E1%84%83%E1%85%A9%E1%86%A8/",
    "wordCount" : "295",
    "keywords" : [  "ecycle"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://2cycle.github.io">ecycle</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://2cycle.github.io">ecycle</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline"></h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://2cycle.github.io" rel="author">Soonhwan.Lee</a> with ♥ 
                <span class="post-time">
                on <time datetime=0001-01-01 itemprop="datePublished">January 1, 0001</time>
                </span>
                in
                
        </div>
    </header>
    <div class="post-content">
        

        

        
        
     
          
          
          

          
          
          

          <pre><code class="language-markdown">## Spring Rest Docs

### 도입 

```text
Spring REST Docs makes use of snippets produced by tests written with Spring MVC’s test framework, Spring WebFlux’s WebTestClient or REST Assured 3. This test-driven approach helps to guarantee the accuracy of your service’s documentation. 
If a snippet is incorrect the test that produces it will fail.
```
&gt; 테스트 지향적인 접근 방법은 서비스 Document의 정확성을 보장하는데 도움을 준다.

Spring MVC test를 통한 정보를 통해서 문서 조각(snippet)을 모아셔 api document를 만드는 툴
Asciidoctor 를 사용하여 HTML을 생성.
테스트랑 통합하는 방법에는 mockmvc, webTestClient 등을 사용해서 가능하다.

Requirements 
 - java 8
 - Spring framework 5

```java
private MockMvc mockMvc;

@Autowired
private WebApplicationContext context;

@Before
public void setUp() {
   this.mockMvc = MockMvcBuilders.webAppContextSetup(this.context)
         .apply(documentationConfiguration(this.restDocumentation)) 
         .build();
} //documentationConfiguration 메소드에 restDccumentation을 넣어서 사용.

스프링 부트에서는 @AutoconfigureRestDocs 사용해서 편하게 사용 가능
```

### 설정 정보
- restdocs 의존성 추가
- asciidoctor 플러그인 추가
- spring-restdocs-asciidoctor 의존성 추가 &gt; snippet이 자동으로 구성됨
- /target/classes/static/docs 경로에 문서가 생성됨.
- 기본 snippet (curl-request, http-request, http-response, httepie-request, request-body, reponse-body)

### Test코드 확인
MemberControllerTest.java

### adoc파일 작성
테스트코드 기반으로 snippet을 문서로 만들기 위해선 .adoc 파일을 만들어 줘야합니다. - 뼈대를 잡음.
- src/main/asciidoc/ 경로에 .adoc 파일을 생성하고 snippet을 추가해야함

### snippet 템플릿
- 디폴트 템플릿 &gt; /target/test-classes/org/springframework/restdocs/templates/asciidoctor/request-fields.snippet
- Custom tempate을 만들고 싶을 경우 &gt; src/test/resources/org/springframework/restdocs/templates/request-fields.snippet 에 추가하면 된다.

### Swagger vs RestDocs
 - Swagger
    - swagger의 경우 API 호출을 쉽게 해볼 수 있는 것(API 테스트)에 초점이 맞춰짐(명세기능이 일부분임)
    - 테스트 화면을 제공하고, 적용하기가 쉽다.
    - 실제 production 코드에 어노테이션이 추가되어야 하는 등 코드량이 증가한다.
    - 해당 코드는 주석의 역할만 하기 때문에 수정 갱신이 잘 이뤄지지 않으면 코드가 일치하지 않음.
 - Rest Docs
    - 제품 코드에 영향이 없다.
    - Test 가 통과해야 문서 작성이 이뤄지기에 실제 코드와 일치성이 높다.
    - Production 코드에 추가되는 내용이 없다.
  &gt; 고로 API명세용으로는 Spring Rest Docs가 낫다
</code></pre>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>Soonhwan.Lee </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://2cycle.github.io/1/%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%B5%E1%86%BC-%E1%84%85%E1%85%A6%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3-%E1%84%83%E1%85%A9%E1%86%A8/>https://2cycle.github.io/1/%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%B5%E1%86%BC-%E1%84%85%E1%85%A6%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3-%E1%84%83%E1%85%A9%E1%86%A8/</span>
            </p>
            
            
    </div>

  
    <div class="post-tags">
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="https://2cycle.github.io">home</a></span>
        </section>
    </div>

    <div class="post-nav">
         
        
        <a href="https://2cycle.github.io/2019/init/" class="next" rel="next" title="Init">Init&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2019 - 2020</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://2cycle.github.io">Soonhwan.Lee</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  



     </div>
  </body>
</html>
